# B1 â€” Baseline + SSL (Scene State Latent)
#
# Ablation variant: adds SSL on top of B0 baseline.
# SSL maintains acting state z_t across dialogue turns.
#
# Usage:
#   uv run python scripts/eval_research_baseline.py --config configs/research/b1.yaml --seed 42

variant: b1
description: "B0 + SSL: Scene State Latent for cross-turn acting consistency."

# --- Model ---
model:
  type: teacher_unet
  d_content: 768
  d_speaker: 192
  n_acoustic_params: 32
  ssl_enabled: true
  bpeh_enabled: false

# --- SSL ---
ssl:
  d_scene_state: 64
  d_history: 128
  n_gru_layers: 1
  prosody_stats_dim: 8
  state_reset_policy: scene_boundary

# --- Training ---
training:
  batch_size: 64
  max_frames: 400
  lr: 1.0e-4
  warmup_steps: 5000
  max_steps: 200000
  grad_clip: 1.0

# --- Loss weights ---
loss_weights:
  lambda_duration: 1.0
  lambda_f0: 0.5
  lambda_content: 1.0
  lambda_voiced: 0.2
  lambda_state_recon: 0.5
  lambda_state_cons: 0.3

# --- Sampling ---
sampling:
  steps: 32
  sway_coefficient: 1.0
  cfg_scale: 1.0

# --- Test split (same as B0 for fair comparison) ---
test_split:
  datasets: [vctk, jvs]
  speakers:
    - vctk_p225
    - vctk_p226
    - vctk_p227
    - vctk_p228
    - jvs_jvs001
    - jvs_jvs002
    - jvs_jvs003
    - jvs_jvs004
  max_utterances_per_speaker: 10

# --- Metrics ---
metrics:
  - mel_mse
  - secs
  - f0_correlation
  - utmos_proxy
  - turn_coherence_score

# --- Output ---
output:
  format: json
  save_mel: false
  save_audio: true
